// SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
/*
 * Copyright (C) PHYTEC GmbH 2019-2020 - All Rights Reserved
 * Author: Dom VOVARD <dom.vovard@linrt.com>.
 * Devicetree expansion for RedBear IoT pHAT Wifi Bluetooth module
 */


/ {
	gpio_led_wl: leds {
		compatible = "gpio-leds";
		status = "okay";

		wl_reg {
			gpios = <&gpioe 4 0>;
			linux,default-trigger = "default-on";
		};
	};
};

&spi1 {
        status = "okay";
	cs-gpios = <&gpioz 3 0>;
	spi@0 {
                compatible = "linux,spidev";
                spi-max-frequency = <10000000>;
                reg = <0>;
        };
};

&sdmmc3 {
	arm,primecell-periphid = <0x10153180>;
	pinctrl-names = "default", "opendrain", "sleep";
	pinctrl-0 = <&sdmmc3_b4_pins_a>;
	pinctrl-1 = <&sdmmc3_b4_od_pins_a>;
	pinctrl-2 = <&sdmmc3_b4_sleep_pins_a>;
	non-removable;
	st,neg-edge;
	bus-width = <4>;
	max-frequency = <10000000>;
	vmmc-supply = <&v3v3>;
	status = "okay";

	brcmf: bcrmf@1 {
		reg = <1>;
		compatible = "brcm,bcm4329-fmac";
	};
};

&i2c1 {
        status = "okay";
};

&usart1 {
        status = "okay";
	st,hw-flow-ctrl;

	bluetooth {
		shutdown-gpios = <&gpiog 2 GPIO_ACTIVE_HIGH>;
		compatible = "brcm,bcm43438-bt";
		max-speed = <3000000>;
	};
};
