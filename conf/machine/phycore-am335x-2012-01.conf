#@TYPE: Machine
#@NAME: phyam335x-flex-13-01, deprecated name: pfla03
#@DESCRIPTION: Machine configuration for the Module PFL-A-03 with baseboard PBA-B-01 1364.4
#from http://www.phytec.de 

require conf/machine/include/am335x.inc

# install the kernel modules to rootfs
MACHINE_EXTRA_RRECOMMENDS += "kernel-modules"

IMAGE_FSTYPES += "tar.gz"
#ubifs

PREFERRED_PROVIDER_virtual/kernel = "linux-am335x"
SERIAL_CONSOLE = "115200 ttyO0"

###################
# Barebox Config
# ##################
# use barebox instead of uboot
PREFERRED_PROVIDER_virtual/bootloader = "barebox"
EXTRA_IMAGEDEPENDS_remove = "u-boot"
EXTRA_IMAGEDEPENDS += "barebox barebox-ipl"
PACKAGE_INSTALL_append = " barebox barebox-dev barebox-ipl"
# AM335x pre bootloader needs to be configured
BAREBOX_BIN = "images/barebox-am33xx-phytec-phycore.img"
BAREBOX_IPL_BIN = "images/barebox-am33xx-phytec-phycore-mlo.img"
BAREBOX_IPL_BIN_DEPLOY = "MLO-${MACHINE}-${PV}-${PR}.img"
BAREBOX_IPL_BIN_SYMLINK = "MLO"
BAREBOX_DEFAULT_DEFCONFIG = "am335x_defconfig"
BAREBOX_IPL_DEFAULT_DEFCONFIG = "am335x_mlo_defconfig"
